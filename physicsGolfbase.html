<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Mini-Golf</title>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script> 
  <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script> 
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.2.0/dist/aframe-extras.min.js"></script>
  <script>      
    AFRAME.registerComponent('golf', {
     init: function (){
      var sceneEl = document.querySelector('a-scene');
      var hole = sceneEl.querySelector('#hole')
      var ball = sceneEl.querySelector('#ball')
      
     
       hole.emit('collide', {collidingEntity: this});
         console.log("hi");
      hole.addEventListener('collide', function (event) {
          if(event.detail.body.id){ // .id == ball?
            console.log("collided");
            hole.setAttribute('material', 'color', 'yellow'); 
             hole.setAttribute('particle-system', 'color: #F2CE1B; velocityValue: 0 2 0; size:.25; velocitySpread: 1 3 1; maxAge: .5; positionSpread: 0 4 0;');
          }
        });
     }     
    });



</script>
</head>

<body>

  <a-scene golf>

    <!-- Camera -->
    <a-entity
    camera
    position="0 .5 0"
    kinematic-body
    look-controls
    universal-controls>
    </a-entity>

    <!-- Immovable box 
    <a-entity id="box" static-body geometry="primitive: box; width: 1; depth: 1; height: 1" position="-1 0.5 -3" rotation="0 45 0" material="color: #4CC3D9"></a-entity>-->

    <!-- golf ball -->
    <a-entity id="ball" dynamic-body="sphereRadius: NaN" geometry="primitive: sphere; radius: 0.2" material="color: #35cabb" position="0 0.2 -5" quaternion="-2.277522645137369e-17 0 0 1" velocity="" ></a-entity>

    <!-- hole -->
    <a-entity id="hole" static-body="sphereRadius: NaN" geometry="primitive: cylinder; height: 0.5; radius: 0.3" material="color: #ff8080" position="0 0 -8" ></a-entity>
    <!-- floor -->
     <a-entity id="plane" static-body="sphereRadius: NaN" position="0 0 -4" rotation="-90 0 0" geometry="primitive: plane; width: 20; height: 20" material="color: #55b989"></a-entity>
    <a-entity id="plane-2" static-body="sphereRadius: NaN" position="0 -0.35285 -4" rotation="-90 0 0" geometry="primitive: plane; width: 20; height: 20" material="color: #004000"></a-entity>

    <!-- wall -->
    <a-entity id="wall-1" static-body="sphereRadius: NaN" geometry="depth: 0.42; height: 10; width: 20" material="color: #7BC8A4" position="0 0.0 -13"></a-entity>
    <a-entity id="wall-2" static-body="sphereRadius: NaN" geometry="depth: 0.42; height: 10; width: 20" material="color: #7BC8A4" position="-10 0 -3.46584" rotation="0 90 0"></a-entity>
    <a-entity id="wall-3" static-body="sphereRadius: NaN" geometry="depth: 0.42; height: 10; width: 20" material="color: #7BC8A4" position="10 0 -3.46584" rotation="0 90 0"></a-entity>
    <a-entity id="wall-4" static-body="sphereRadius: NaN" geometry="depth: 0.42; height: 10; width: 20" material="color: #7BC8A4" position="0 0.0 6"></a-entity>

    

  </a-scene>

</body>

</html>

